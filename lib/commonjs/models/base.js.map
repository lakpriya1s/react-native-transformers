{"version":3,"names":["require","_onnxruntimeReactNative","load","uri","fetch","then","response","arrayBuffer","getHuggingfaceUrl","model","filepath","Base","feed","eos","kv_dims","num_layers","dtype","constructor","onnx_file","options","verbose","json_bytes","textDecoder","TextDecoder","model_config","JSON","parse","decode","model_path","opt","executionProviders","graphOptimizationLevel","externalData","logSeverityLevel","logVerbosityLevel","env","logLevel","sess","InferenceSession","create","eos_token_id","num_key_value_heads","hidden_size","num_attention_heads","num_hidden_layers","initializeFeed","name","t","undefined","location","dispose","empty","Uint16Array","i","Tensor","argmax","arr","data","start","dims","max","maxidx","val","isFinite","Error","updateKVCache","outputs","startsWith","newName","replace","release","exports"],"sourceRoot":"../../../src","sources":["models/base.tsx"],"mappings":"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","ignoreList":[]}
