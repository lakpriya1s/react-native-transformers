{"version":3,"names":["require","_onnxruntimeReactNative","_base","TextGeneration","Base","outputTokens","needPositionIds","stopGeneration","initializeFeed","generate","tokens","callback","options","maxTokens","feed","initialTokens","BigInt64Array","from","map","BigInt","inputIdsTensor","Tensor","length","input_ids","push","data","lastToken","sequenceLength","initialLength","size","position_ids","_","i","sess","Error","eos","attention_mask","outputs","run","argmax","logits","updateKVCache","exports"],"sourceRoot":"../../../src","sources":["models/text-generation.tsx"],"mappings":"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","ignoreList":[]}
