{"version":3,"names":["Tensor","Base","TextGeneration","outputTokens","needPositionIds","stopGeneration","initializeFeed","generate","tokens","callback","options","maxTokens","feed","initialTokens","BigInt64Array","from","map","BigInt","inputIdsTensor","length","input_ids","push","data","lastToken","sequenceLength","initialLength","size","position_ids","_","i","sess","Error","eos","attention_mask","outputs","run","argmax","logits","updateKVCache"],"sourceRoot":"../../../src","sources":["models/text-generation.tsx"],"mappings":"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","ignoreList":[]}
