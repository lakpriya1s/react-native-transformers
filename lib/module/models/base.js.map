{"version":3,"names":["env","InferenceSession","Tensor","load","uri","fetch","then","response","arrayBuffer","getHuggingfaceUrl","model","filepath","Base","feed","eos","kv_dims","num_layers","dtype","constructor","onnx_file","options","verbose","json_bytes","textDecoder","TextDecoder","model_config","JSON","parse","decode","model_path","opt","executionProviders","graphOptimizationLevel","externalData","logSeverityLevel","logVerbosityLevel","logLevel","sess","create","eos_token_id","num_key_value_heads","hidden_size","num_attention_heads","num_hidden_layers","initializeFeed","name","t","undefined","location","dispose","empty","Uint16Array","i","argmax","arr","data","start","dims","max","maxidx","val","isFinite","Error","updateKVCache","outputs","startsWith","newName","replace","release"],"sourceRoot":"../../../src","sources":["models/base.tsx"],"mappings":"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","ignoreList":[]}
